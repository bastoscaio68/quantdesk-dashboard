<!DOCTYPE html> <html lang="pt-BR"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>QuantDesk</title> <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script> <link rel="preconnect" href="https://fonts.googleapis.com"> <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"> <style> :root { --bg: #F7F6F3; --surface: #FFFFFF; --border: #E8E5E0; --border2: #F0EDE8; --text: #1A1814; --muted: #9C9589; --dim: #C8C3BB; --green: #2D6A4F; --red: #C1121F; --amber: #C9882A; --blue: #457B9D; --r: 14px; } *{box-sizing:border-box;margin:0;padding:0} body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-size:14px;line-height:1.5} /* HEADER */ header{background:var(--surface);border-bottom:1px solid var(--border);height:58px;padding:0 36px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100} .logo{display:flex;align-items:center;gap:9px} .logo-mark{width:26px;height:26px;background:var(--green);border-radius:7px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:13px;font-weight:600} .logo-name{font-size:15px;font-weight:600;letter-spacing:-.02em} .hright{display:flex;align-items:center;gap:20px} .btc-price{font-family:'DM Mono',monospace;font-size:16px;font-weight:500;letter-spacing:-.02em} .btc-meta{font-size:11px;color:var(--muted);margin-top:1px;display:flex;gap:8px;justify-content:flex-end;align-items:center} .chg{font-family:'DM Mono',monospace;font-size:11px;font-weight:500;padding:1px 6px;border-radius:5px} .chg.up{background:#E8F5EE;color:var(--green)} .chg.dn{background:#FDECEA;color:var(--red)} .live{font-size:11px;color:var(--muted);letter-spacing:.04em;text-transform:uppercase;display:flex;align-items:center;gap:5px} .live::before{content:'';width:6px;height:6px;background:#52B788;border-radius:50%;animation:blink 2.2s ease infinite} @keyframes blink{0%,100%{opacity:1}50%{opacity:.25}} .btn{background:var(--green);color:#fff;border:none;padding:8px 15px;border-radius:9px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:500;cursor:pointer;transition:opacity .15s} .btn:hover{opacity:.85} .btn-ghost{background:var(--bg);color:var(--muted);border:1px solid var(--border);padding:7px 14px;border-radius:9px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s} .btn-ghost:hover{border-color:var(--text);color:var(--text)} /* TABS */ .tabs{background:var(--surface);border-bottom:1px solid var(--border);padding:0 36px;display:flex;gap:2px} .tab{padding:11px 15px;font-size:13px;font-weight:500;color:var(--muted);cursor:pointer;border:none;background:none;border-bottom:2px solid transparent;margin-bottom:-1px;transition:color .15s,border-color .15s} .tab:hover{color:var(--text)} .tab.on{color:var(--text);border-bottom-color:var(--green)} main{padding:28px 36px;max-width:1440px;margin:0 auto} .hidden{display:none!important} /* KPI ROW */ .kpi-row{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:20px} @media(max-width:1100px){.kpi-row{grid-template-columns:repeat(3,1fr)}} .kpi{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:18px 20px;position:relative;overflow:hidden;transition:box-shadow .2s} .kpi:hover{box-shadow:0 4px 18px rgba(0,0,0,.07)} .kpi-bar{position:absolute;bottom:0;left:0;right:0;height:2px} .kpi-label{font-size:11px;font-weight:500;color:var(--muted);letter-spacing:.06em;text-transform:uppercase;margin-bottom:9px} .kpi-value{font-family:'DM Mono',monospace;font-size:24px;font-weight:500;letter-spacing:-.03em;line-height:1} .kpi-sub{font-size:11px;color:var(--muted);margin-top:6px} /* PANEL */ .panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:22px} .ph{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:18px} .pt{font-size:13px;font-weight:500} .ps{font-size:11px;color:var(--muted);margin-top:3px} /* CHARTS */ .charts-row{display:grid;grid-template-columns:1.8fr 1fr;gap:14px;margin-bottom:16px} @media(max-width:960px){.charts-row{grid-template-columns:1fr}} /* CLASSIFICATION CARDS ‚Äî 2 rows: Dire√ß√£o + Intensidade */ .class-section{margin-bottom:16px} .class-label{font-size:11px;font-weight:500;color:var(--muted);letter-spacing:.06em;text-transform:uppercase;margin-bottom:8px} .class-cards{display:grid;gap:10px} .class-cards.dir{grid-template-columns:repeat(3,1fr)} .class-cards.int{grid-template-columns:repeat(4,1fr)} @media(max-width:900px){.class-cards.dir,.class-cards.int{grid-template-columns:repeat(2,1fr)}} .ccard{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:16px 18px;transition:box-shadow .2s} .ccard:hover{box-shadow:0 4px 14px rgba(0,0,0,.06)} .ccard-name{font-size:11px;font-weight:500;letter-spacing:.04em;text-transform:uppercase;margin-bottom:10px} .ccard-pnl{font-family:'DM Mono',monospace;font-size:19px;font-weight:500;letter-spacing:-.03em;margin-bottom:6px} .ccard-stats{display:flex;gap:10px;font-size:11px;color:var(--muted)} /* TABLE */ .tw{overflow-x:auto} .chart-wrap{position:relative;height:160px} table{width:100%;border-collapse:collapse} thead th{font-size:11px;font-weight:500;color:var(--muted);letter-spacing:.05em;text-transform:uppercase;padding:9px 13px;text-align:left;border-bottom:1px solid var(--border);white-space:nowrap} tbody td{padding:11px 13px;border-bottom:1px solid var(--border2);font-size:13px} tbody tr:last-child td{border-bottom:none} tbody tr:hover td{background:var(--bg)} .mono{font-family:'DM Mono',monospace;font-size:12px} .tag{display:inline-flex;align-items:center;padding:2px 8px;border-radius:5px;font-size:11px;font-weight:500} /* FILTERS */ .filters{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:14px} .pill{padding:5px 13px;border-radius:20px;font-size:12px;font-weight:500;cursor:pointer;border:1px solid var(--border);background:var(--surface);color:var(--muted);transition:all .15s} .pill:hover{border-color:var(--green);color:var(--green)} .pill.on{background:var(--green);color:#fff;border-color:var(--green)} /* CAPITAL */ .cap-layout{display:grid;grid-template-columns:290px 1fr;gap:14px} @media(max-width:840px){.cap-layout{grid-template-columns:1fr}} .srow{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border2);font-size:13px} .srow:last-child{border-bottom:none} .sk{color:var(--muted)} .sv{font-family:'DM Mono',monospace;font-weight:500;font-size:13px} .ev{display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border2)} .ev:last-child{border-bottom:none} .ev-ico{width:34px;height:34px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0} .ev-info{flex:1} .ev-title{font-size:13px;font-weight:500;text-transform:capitalize} .ev-date{font-size:11px;color:var(--muted);margin-top:1px} .ev-amt{font-family:'DM Mono',monospace;font-size:14px;font-weight:500} /* MODAL */ .overlay{position:fixed;inset:0;background:rgba(26,24,20,.35);backdrop-filter:blur(3px);z-index:200;display:flex;align-items:center;justify-content:center;padding:20px} .modal{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:26px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 24px 60px rgba(0,0,0,.12)} .mt{font-size:15px;font-weight:600;letter-spacing:-.02em;margin-bottom:20px} .fgrid{display:grid;grid-template-columns:1fr 1fr;gap:10px} .fg label{display:block;font-size:11px;font-weight:500;color:var(--muted);letter-spacing:.05em;text-transform:uppercase;margin-bottom:5px} .fg input,.fg select{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:8px 11px;font-family:'DM Sans',sans-serif;font-size:13px;color:var(--text);outline:none;transition:border-color .15s;-webkit-appearance:none} .fg input:focus,.fg select:focus{border-color:var(--green);background:#fff} .section-sep{font-size:10px;font-weight:600;color:var(--dim);letter-spacing:.08em;text-transform:uppercase;grid-column:1/-1;margin-top:6px;padding-bottom:2px;border-bottom:1px solid var(--border2)} .mact{display:flex;gap:8px;justify-content:flex-end;margin-top:20px;padding-top:14px;border-top:1px solid var(--border)} .empty{text-align:center;padding:50px 20px;color:var(--muted)} .ei{font-size:32px;margin-bottom:10px;opacity:.35} ::-webkit-scrollbar{width:4px;height:4px} ::-webkit-scrollbar-track{background:transparent} ::-webkit-scrollbar-thumb{background:var(--dim);border-radius:2px} </style> </head> <body> <header> <div class="logo"> <div class="logo-mark">Q</div> <span class="logo-name">QuantDesk</span> </div> <div class="hright"> <div> <div class="btc-price" id="btcPrice">‚Äî</div> <div class="btc-meta"><span>BTC/USDT</span><span id="btcChg" class="chg up">‚Äî</span></div> </div> <div class="live" id="liveEl">Live</div> <button class="btn" onclick="openModal('tm')">+ Trade</button> </div> </header> <div class="tabs"> <button class="tab on" onclick="tab('ov',this)">Vis√£o Geral</button> <button class="tab" onclick="tab('tr',this)">Trades</button> <button class="tab" onclick="tab('ca',this)">Capital</button> </div> <main> <!-- OVERVIEW --> <div id="tab-ov"> <div class="kpi-row" id="kpis"></div> <div class="charts-row"> <div class="panel"> <div class="ph"> <div><div class="pt">Curva de Capital</div><div class="ps">Evolu√ß√£o por trade</div></div> <div id="growthTag" style="font-size:12px;font-family:'DM Mono',monospace;font-weight:500"></div> </div> <div class="chart-wrap"><canvas id="capChart"></canvas></div> </div> <div class="panel"> <div class="ph"><div><div class="pt">PnL por Dire√ß√£o</div><div class="ps">Acumulado</div></div></div> <div class="chart-wrap"><canvas id="dirChart"></canvas></div> </div> </div> <!-- Dire√ß√£o cards --> <div class="class-section"> <div class="class-label">Por Dire√ß√£o</div> <div class="class-cards dir" id="dirCards"></div> </div> <!-- Intensidade cards --> <div class="class-section" style="margin-bottom:20px"> <div class="class-label">Por Intensidade</div> <div class="class-cards int" id="intCards"></div> </div> <!-- Recent trades --> <div class="panel"> <div class="ph"><div><div class="pt">√öltimos 10 Trades</div></div></div> <div class="tw"><table><thead><tr> <th>Data</th><th>Dire√ß√£o</th><th>Intensidade</th><th>Long/Short</th><th>Entrada</th><th>Lev.</th><th>Result. %</th><th>Result. USDT</th> </tr></thead><tbody id="rtBody"></tbody></table></div> </div> </div> <!-- TRADES --> <div id="tab-tr" class="hidden"> <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;flex-wrap:wrap;gap:10px"> <div> <div style="font-size:11px;color:var(--muted);margin-bottom:6px;letter-spacing:.04em;text-transform:uppercase;font-weight:500">Dire√ß√£o</div> <div class="filters" id="pillsDir"></div> </div> <button class="btn" onclick="openModal('tm')">+ Novo Trade</button> </div> <div style="margin-bottom:14px"> <div style="font-size:11px;color:var(--muted);margin-bottom:6px;letter-spacing:.04em;text-transform:uppercase;font-weight:500">Intensidade</div> <div class="filters" id="pillsInt"></div> </div> <div class="panel"><div class="tw"><table><thead><tr> <th>Data</th><th>Dire√ß√£o</th><th>Intensidade</th><th>L/S</th><th>Entrada</th><th>TP</th><th>SL</th><th>Lev.</th><th>Result. %</th><th>Result. USDT</th><th>Setup</th><th></th> </tr></thead><tbody id="tBody"></tbody></table></div></div> </div> <!-- CAPITAL --> <div id="tab-ca" class="hidden"> <div class="cap-layout"> <div> <div class="panel" id="capSum" style="margin-bottom:12px"></div> <button class="btn" style="width:100%" onclick="openModal('cm')">+ Movimento</button> </div> <div class="panel" id="capHist"></div> </div> </div> </main> <!-- TRADE MODAL --> <div class="overlay hidden" id="tm"> <div class="modal"> <div class="mt">Registrar Trade</div> <div class="fgrid"> <div class="section-sep">Classifica√ß√£o</div> <div class="fg"><label>1Ô∏è‚É£ Dire√ß√£o</label> <select id="t_dir_type"> <option value="Tend√™ncia de Alta">Tend√™ncia de Alta</option> <option value="Tend√™ncia de Baixa">Tend√™ncia de Baixa</option> <option value="Neutral">Neutral</option> </select> </div> <div class="fg"><label>2Ô∏è‚É£ Intensidade</label> <select id="t_intensity"> <option value="Ultra Defensiva">Ultra Defensiva</option> <option value="Moderada">Moderada</option> <option value="Equilibrada">Equilibrada</option> <option value="Agressiva">Agressiva</option> </select> </div> <div class="section-sep">Opera√ß√£o</div> <div class="fg"><label>Data</label><input type="date" id="t_date"/></div> <div class="fg"><label>Long / Short</label> <select id="t_dir"><option>LONG</option><option>SHORT</option></select> </div> <div class="fg"><label>Entrada</label><input type="number" id="t_ent" placeholder="97500"/></div> <div class="fg"><label>Alavancagem</label><input type="number" id="t_lev" placeholder="10"/></div> <div class="fg"><label>Take Profit</label><input type="number" id="t_tp" placeholder="105000"/></div> <div class="fg"><label>Stop Loss</label><input type="number" id="t_sl" placeholder="93000"/></div> <div class="section-sep">Resultado</div> <div class="fg"><label>Resultado %</label><input type="number" id="t_pct" step="0.01" placeholder="5.20"/></div> <div class="fg"><label>Resultado USDT</label><input type="number" id="t_usd" step="0.01" placeholder="520"/></div> <div class="fg" style="grid-column:1/-1"><label>Setup</label><input type="text" id="t_set" placeholder="EMA Cross Bull"/></div> </div> <div class="mact"> <button class="btn-ghost" onclick="closeModal('tm')">Cancelar</button> <button class="btn" onclick="saveTrade()">Salvar</button> </div> </div> </div> <!-- CAPITAL MODAL --> <div class="overlay hidden" id="cm"> <div class="modal"> <div class="mt">Movimento de Capital</div> <div class="fgrid"> <div class="fg"><label>Data</label><input type="date" id="c_date"/></div> <div class="fg"><label>Tipo</label><select id="c_typ"><option value="aporte">Aporte</option><option value="retirada">Retirada</option></select></div> <div class="fg" style="grid-column:1/-1"><label>Valor (USDT)</label><input type="number" id="c_amt" placeholder="1000"/></div> <div class="fg" style="grid-column:1/-1"><label>Nota</label><input type="text" id="c_not" placeholder="Opcional‚Ä¶"/></div> </div> <div class="mact"> <button class="btn-ghost" onclick="closeModal('cm')">Cancelar</button> <button class="btn" onclick="saveCapital()">Salvar</button> </div> </div> </div> <script> const API = window.location.origin + '/api'; let S = {trades:[], capital:[], metrics:{}, btc:{}, filterDir:'Todos', filterInt:'Todos'}; let C1, C2; // ‚îÄ‚îÄ CLASSIFICA√á√ÉO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ const DIRS = ['Tend√™ncia de Alta','Tend√™ncia de Baixa','Neutral']; const INTS = ['Ultra Defensiva','Moderada','Equilibrada','Agressiva']; const DIR_COL = { 'Tend√™ncia de Alta': '#2D6A4F', 'Tend√™ncia de Baixa': '#C1121F', 'Neutral': '#457B9D' }; const INT_COL = { 'Ultra Defensiva': '#95D5B2', 'Moderada': '#52B788', 'Equilibrada': '#C9882A', 'Agressiva': '#C1121F' }; // ‚îÄ‚îÄ MOCK DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ const MOCK = { btc: { price: 103420.50, change_24h: 2.37 }, trades: [ {id:1, date:'2025-01-03', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:94200, tp:102000, sl:90000, leverage:15, result_pct:8.32, result_usdt:1248, setup:'EMA 21/55 Cross'}, {id:2, date:'2025-01-07', direction_type:'Neutral', intensity:'Ultra Defensiva', direction:'LONG', entry:96500, tp:103000, sl:92000, leverage:5, result_pct:3.10, result_usdt:310, setup:'Grid Range 3%'}, {id:3, date:'2025-01-11', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:97800, tp:107500, sl:93000, leverage:20, result_pct:12.40, result_usdt:2480, setup:'ATH Breakout'}, {id:4, date:'2025-01-14', direction_type:'Tend√™ncia de Baixa', intensity:'Moderada', direction:'SHORT', entry:101200, tp:93000, sl:105000, leverage:12, result_pct:-4.80, result_usdt:-720, setup:'Death Cross'}, {id:5, date:'2025-01-18', direction_type:'Neutral', intensity:'Equilibrada', direction:'LONG', entry:98400, tp:101500, sl:96000, leverage:8, result_pct:1.90, result_usdt:228, setup:'Range 98-101k'}, {id:6, date:'2025-01-22', direction_type:'Tend√™ncia de Alta', intensity:'Equilibrada', direction:'LONG', entry:99100, tp:108000, sl:94500, leverage:12, result_pct:9.50, result_usdt:1140, setup:'Bull Flag'}, {id:7, date:'2025-01-25', direction_type:'Neutral', intensity:'Ultra Defensiva', direction:'LONG', entry:100300, tp:106000, sl:96000, leverage:5, result_pct:2.70, result_usdt:270, setup:'Grid Range 5%'}, {id:8, date:'2025-01-29', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:101800, tp:112000, sl:97000, leverage:18, result_pct:-3.20, result_usdt:-576, setup:'Resist√™ncia 102k'}, {id:9, date:'2025-02-01', direction_type:'Tend√™ncia de Alta', intensity:'Moderada', direction:'LONG', entry:102500, tp:112000, sl:98000, leverage:10, result_pct:6.80, result_usdt:680, setup:'RSI Oversold + EMA'}, {id:10, date:'2025-02-05', direction_type:'Tend√™ncia de Baixa', intensity:'Equilibrada', direction:'SHORT', entry:103800, tp:99000, sl:106000, leverage:10, result_pct:-2.10, result_usdt:-210, setup:'Range Breakdown'}, {id:11, date:'2025-02-08', direction_type:'Neutral', intensity:'Moderada', direction:'LONG', entry:101200, tp:106000, sl:97500, leverage:8, result_pct:4.20, result_usdt:420, setup:'Ranging Market'}, {id:12, date:'2025-02-11', direction_type:'Tend√™ncia de Alta', intensity:'Equilibrada', direction:'LONG', entry:102100, tp:110500, sl:97800, leverage:12, result_pct:7.10, result_usdt:852, setup:'EMA Retest Bull'}, ], capital: [ {id:1, date:'2025-01-01', type:'aporte', amount:5000, notes:'Capital inicial'}, {id:2, date:'2025-01-15', type:'aporte', amount:2000, notes:'Refor√ßo'}, {id:3, date:'2025-02-01', type:'retirada', amount:1500, notes:'Retirada parcial'}, ], metrics: { total_pnl:6122, win_rate:75.0, total_trades:12, max_dd:8.4, sharpe:1.87 } }; // ‚îÄ‚îÄ FETCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ async function load() { try { const [mkt, data] = await Promise.all([ fetch(`${API}/market`).then(r=>r.json()), fetch(`${API}/metrics`).then(r=>r.json()) ]); S.btc = mkt.price ? mkt : MOCK.btc; S.trades = data.trades?.length ? data.trades : MOCK.trades; S.capital = data.capital_events?.length ? data.capital_events : MOCK.capital; S.metrics = data.metrics?.total_trades ? data.metrics : MOCK.metrics; document.getElementById('liveEl').style.color = ''; } catch { S.btc = MOCK.btc; S.trades = MOCK.trades; S.capital = MOCK.capital; S.metrics = MOCK.metrics; document.getElementById('liveEl').style.color = 'var(--amber)'; } renderHeader(); renderOv(); renderTr(); renderCa(); } // ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function renderHeader() { if (!S.btc.price) return; document.getElementById('btcPrice').textContent = '$' + S.btc.price.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2}); const ch = S.btc.change_24h||0; const el = document.getElementById('btcChg'); el.textContent = (ch>=0?'+':'') + ch.toFixed(2) + '%'; el.className = 'chg ' + (ch>=0?'up':'dn'); } // ‚îÄ‚îÄ KPIs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function renderOv() { const m = S.metrics; document.getElementById('kpis').innerHTML = [ {l:'PnL Total', v:fmt(m.total_pnl||0), c:(m.total_pnl||0)>=0?'var(--green)':'var(--red)', bar:'#2D6A4F'}, {l:'Win Rate', v:(m.win_rate||0).toFixed(1)+'%', c:wr2c(m.win_rate||0), bar:'#C9882A'}, {l:'Trades', v:m.total_trades||0, c:'var(--text)', bar:'#95D5B2'}, {l:'Max Drawdown', v:'-'+(m.max_dd||0).toFixed(1)+'%', c:(m.max_dd||0)>20?'var(--red)':'var(--amber)', bar:'#C1121F'}, {l:'Sharpe', v:Number(m.sharpe||0).toFixed(2), c:+(m.sharpe||0)>=1?'var(--green)':'var(--text)', bar:'var(--blue)'}, ].map(k=>`<div class="kpi"><div class="kpi-bar" style="background:${k.bar};opacity:.3"></div><div class="kpi-label">${k.l}</div><div class="kpi-value" style="color:${k.c}">${k.v}</div></div>`).join(''); buildCharts(); buildDirCards(); buildIntCards(); buildRecent(); } function wr2c(wr){ return wr>=60?'var(--green)':wr>=45?'var(--amber)':'var(--red)'; } // ‚îÄ‚îÄ CHARTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function buildCharts() { // Capital curve const sorted = [...S.trades].sort((a,b)=>a.date.localeCompare(b.date)); const base = Math.max( S.capital.filter(e=>e.type==='aporte').reduce((s,e)=>s+e.amount,0) - S.capital.filter(e=>e.type==='retirada').reduce((s,e)=>s+e.amount,0), 1000 ) - sorted.reduce((s,t)=>s+t.result_usdt,0); let cum=0; const lbs=['In√≠cio'], vals=[Math.round(base)]; sorted.forEach(t=>{ cum+=t.result_usdt; lbs.push(t.date.slice(5)); vals.push(Math.round(base+cum)); }); const isUp = vals[vals.length-1] >= vals[0]; const lc = isUp ? '#2D6A4F' : '#C1121F'; const ctx1 = document.getElementById('capChart').getContext('2d'); const g = ctx1.createLinearGradient(0,0,0,200); g.addColorStop(0, isUp?'rgba(45,106,79,.13)':'rgba(193,18,31,.1)'); g.addColorStop(1,'rgba(255,255,255,0)'); if(C1) C1.destroy(); C1 = new Chart(ctx1,{type:'line',data:{labels:lbs,datasets:[{data:vals,borderColor:lc,backgroundColor:g,borderWidth:1.8,pointRadius:0,tension:.4,fill:true}]},options:{ responsive:true,maintainAspectRatio:false, plugins:{legend:{display:false},tooltip:{backgroundColor:'rgba(26,24,20,.9)',bodyColor:'#fff',bodyFont:{family:'DM Mono',size:12},callbacks:{label:c=>` ${c.raw.toLocaleString('en-US')} USDT`}}}, scales:{x:{grid:{display:false},ticks:{color:'#9C9589',font:{size:10},maxTicksLimit:8}},y:{grid:{color:'rgba(0,0,0,.04)'},ticks:{color:'#9C9589',font:{family:'DM Mono',size:10},callback:v=>v.toLocaleString('en-US')}}} }}); if(vals.length>1){ const gr=((vals[vals.length-1]-vals[0])/vals[0]*100); const el=document.getElementById('growthTag'); el.textContent=(gr>=0?'+':'')+gr.toFixed(1)+'%'; el.style.color=gr>=0?'var(--green)':'var(--red)'; } // PnL por Dire√ß√£o const pnls = DIRS.map(d=>S.trades.filter(t=>t.direction_type===d).reduce((s,t)=>s+t.result_usdt,0)); const ctx2 = document.getElementById('dirChart').getContext('2d'); if(C2) C2.destroy(); C2 = new Chart(ctx2,{type:'bar',data:{labels:DIRS.map(d=>d==='Tend√™ncia de Alta'?'T. Alta':d==='Tend√™ncia de Baixa'?'T. Baixa':d),datasets:[{data:pnls,backgroundColor:DIRS.map((d,i)=>pnls[i]>=0?DIR_COL[d]+'28':'#C1121F22'),borderColor:DIRS.map((d,i)=>pnls[i]>=0?DIR_COL[d]:'#C1121F'),borderWidth:1.5,borderRadius:7,borderSkipped:false}]},options:{ responsive:true,maintainAspectRatio:false, plugins:{legend:{display:false},tooltip:{backgroundColor:'rgba(26,24,20,.9)',bodyColor:'#fff',bodyFont:{family:'DM Mono',size:12},callbacks:{label:c=>` ${c.raw>=0?'+':''}${c.raw.toFixed(0)} USDT`}}}, scales:{x:{grid:{display:false},ticks:{color:'#9C9589',font:{size:10}}},y:{grid:{color:'rgba(0,0,0,.04)'},ticks:{color:'#9C9589',font:{family:'DM Mono',size:10}}}} }}); } // ‚îÄ‚îÄ DIRECTION CARDS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function buildDirCards() { document.getElementById('dirCards').innerHTML = DIRS.map(d=>{ const dt = S.trades.filter(t=>t.direction_type===d); const pnl = dt.reduce((s,t)=>s+t.result_usdt,0); const wr = dt.length ? dt.filter(t=>t.result_usdt>0).length/dt.length*100 : 0; const c = DIR_COL[d]; const ico = d==='Tend√™ncia de Alta'?'‚Üó':d==='Tend√™ncia de Baixa'?'‚Üò':'‚Üí'; return `<div class="ccard" style="border-left:3px solid ${c}"> <div class="ccard-name" style="color:${c}">${ico} ${d}</div> <div class="ccard-pnl" style="color:${dt.length?(pnl>=0?'var(--green)':'var(--red)'):'var(--dim)'}"> ${dt.length?(pnl>=0?'+':'')+pnl.toFixed(0)+' USDT':'‚Äî'} </div> <div class="ccard-stats">${dt.length?`<span>${dt.length} trades</span><span>WR ${wr.toFixed(0)}%</span>`:'<span>Sem trades</span>'}</div> </div>`; }).join(''); } // ‚îÄ‚îÄ INTENSITY CARDS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function buildIntCards() { document.getElementById('intCards').innerHTML = INTS.map(i=>{ const it = S.trades.filter(t=>t.intensity===i); const pnl = it.reduce((s,t)=>s+t.result_usdt,0); const wr = it.length ? it.filter(t=>t.result_usdt>0).length/it.length*100 : 0; const c = INT_COL[i]; const dots = {'Ultra Defensiva':'‚óè','Moderada':'‚óè‚óè','Equilibrada':'‚óè‚óè‚óè','Agressiva':'‚óè‚óè‚óè‚óè'}[i]; return `<div class="ccard" style="border-left:3px solid ${c}"> <div class="ccard-name" style="color:${c}">${dots} ${i}</div> <div class="ccard-pnl" style="color:${it.length?(pnl>=0?'var(--green)':'var(--red)'):'var(--dim)'}"> ${it.length?(pnl>=0?'+':'')+pnl.toFixed(0)+' USDT':'‚Äî'} </div> <div class="ccard-stats">${it.length?`<span>${it.length} trades</span><span>WR ${wr.toFixed(0)}%</span>`:'<span>Sem trades</span>'}</div> </div>`; }).join(''); } // ‚îÄ‚îÄ RECENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function buildRecent() { const rows = [...S.trades].sort((a,b)=>b.date.localeCompare(a.date)).slice(0,10); document.getElementById('rtBody').innerHTML = rows.length ? rows.map(t=>trRow(t,false)).join('') : `<tr><td colspan="8"><div class="empty"><div class="ei">üìã</div>Nenhum trade ainda</div></td></tr>`; } // ‚îÄ‚îÄ TRADES TAB ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function renderTr() { document.getElementById('pillsDir').innerHTML = ['Todos',...DIRS].map(d=> `<button class="pill ${d===S.filterDir?'on':''}" onclick="filtDir('${d}')">${d==='Tend√™ncia de Alta'?'‚Üó T. Alta':d==='Tend√™ncia de Baixa'?'‚Üò T. Baixa':d}</button>` ).join(''); document.getElementById('pillsInt').innerHTML = ['Todos',...INTS].map(i=> `<button class="pill ${i===S.filterInt?'on':''}" onclick="filtInt('${i}')">${i}</button>` ).join(''); let rows = S.trades; if(S.filterDir!=='Todos') rows = rows.filter(t=>t.direction_type===S.filterDir); if(S.filterInt!=='Todos') rows = rows.filter(t=>t.intensity===S.filterInt); rows = [...rows].sort((a,b)=>b.date.localeCompare(a.date)); document.getElementById('tBody').innerHTML = rows.length ? rows.map(t=>trRow(t,true)).join('') : `<tr><td colspan="12"><div class="empty"><div class="ei">üìã</div>Nenhum trade com esses filtros</div></td></tr>`; } function filtDir(d){ S.filterDir=d; renderTr(); } function filtInt(i){ S.filterInt=i; renderTr(); } function trRow(t, full) { const rc = t.result_usdt>=0?'var(--green)':'var(--red)'; const dc = DIR_COL[t.direction_type]||'var(--muted)'; const ic = INT_COL[t.intensity]||'var(--muted)'; const lsc = t.direction==='LONG'?'var(--green)':'var(--red)'; const lsbg = t.direction==='LONG'?'#E8F5EE':'#FDECEA'; const base = ` <td class="mono" style="color:var(--muted)">${t.date}</td> <td><span style="color:${dc};font-weight:500;font-size:12px">${t.direction_type||'‚Äî'}</span></td> <td><span style="color:${ic};font-weight:500;font-size:12px">${t.intensity||'‚Äî'}</span></td> <td><span class="tag" style="background:${lsbg};color:${lsc}">${t.direction}</span></td> <td class="mono">$${(+t.entry).toLocaleString('en-US')}</td>`; const ext = full ? ` <td class="mono" style="color:var(--green)">$${(+t.tp).toLocaleString('en-US')}</td> <td class="mono" style="color:var(--red)">$${(+t.sl).toLocaleString('en-US')}</td> <td class="mono" style="color:var(--muted)">${t.leverage}x</td>` : `<td class="mono" style="color:var(--muted)">${t.leverage}x</td>`; const res = ` <td class="mono" style="color:${rc};font-weight:500">${(+t.result_pct)>=0?'+':''}${(+t.result_pct).toFixed(2)}%</td> <td class="mono" style="color:${rc};font-weight:500">${(+t.result_usdt)>=0?'+':''}${(+t.result_usdt).toFixed(0)}</td>`; const tail = full ? ` <td style="color:var(--muted);font-size:12px">${t.setup||''}</td> <td><button onclick="delT(${t.id})" style="background:none;border:none;color:var(--dim);cursor:pointer;font-size:16px;padding:1px 5px">√ó</button></td>` : ''; return `<tr>${base}${ext}${res}${tail}</tr>`; } // ‚îÄ‚îÄ CAPITAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function renderCa() { const ap = S.capital.filter(e=>e.type==='aporte').reduce((s,e)=>s+e.amount,0); const re = S.capital.filter(e=>e.type==='retirada').reduce((s,e)=>s+e.amount,0); const liq = ap-re, p = S.metrics.total_pnl||0, atual = liq+p; const roi = liq>0?((atual/liq)-1)*100:0; document.getElementById('capSum').innerHTML = `<div style="font-size:13px;font-weight:500;margin-bottom:14px">Resumo</div>` + [['Total aportado',`+${ap.toFixed(0)} USDT`,'var(--green)'],['Total retirado',re>0?`-${re.toFixed(0)} USDT`:'‚Äî',re>0?'var(--red)':'var(--muted)'],['Capital l√≠quido',liq.toFixed(0)+' USDT','var(--text)'],['PnL operacional',fmt(p),p>=0?'var(--green)':'var(--red)'],['Capital estimado',atual.toFixed(0)+' USDT','var(--text)'],['ROI total',(roi>=0?'+':'')+roi.toFixed(2)+'%',roi>=0?'var(--green)':'var(--red)']].map(([k,v,c])=>`<div class="srow"><span class="sk">${k}</span><span class="sv" style="color:${c}">${v}</span></div>`).join(''); const evs = [...S.capital].sort((a,b)=>b.date.localeCompare(a.date)); document.getElementById('capHist').innerHTML = `<div style="font-size:13px;font-weight:500;margin-bottom:4px">Hist√≥rico</div>` + (evs.length ? evs.map(e=>{ const ia=e.type==='aporte'; return `<div class="ev"><div class="ev-ico" style="background:${ia?'#E8F5EE':'#FDECEA'};color:${ia?'var(--green)':'var(--red)'}">${ia?'‚Üë':'‚Üì'}</div><div class="ev-info"><div class="ev-title">${e.type}</div><div class="ev-date">${e.date}${e.notes?' ¬∑ '+e.notes:''}</div></div><div class="ev-amt" style="color:${ia?'var(--green)':'var(--red)'}">${ia?'+':'-'}${(+e.amount).toLocaleString('en-US',{maximumFractionDigits:0})} USDT</div></div>`; }).join('') : `<div class="empty"><div class="ei">üí∞</div>Nenhum evento</div>`); } // ‚îÄ‚îÄ CRUD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ async function saveTrade() { const trade = { date: g('t_date') || today(), direction_type: g('t_dir_type'), intensity: g('t_intensity'), profile: g('t_dir_type') + ' ¬∑ ' + g('t_intensity'), // compat backend direction: g('t_dir'), entry: +g('t_ent'), tp: +g('t_tp'), sl: +g('t_sl'), leverage: +g('t_lev'), result_pct: +g('t_pct'), result_usdt: +g('t_usd'), setup: g('t_set'), notes: '' }; await fetch(`${API}/trades`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(trade)}); closeModal('tm'); load(); } async function delT(id) { if(!confirm('Remover este trade?')) return; await fetch(`${API}/trades/${id}`,{method:'DELETE'}); load(); } async function saveCapital() { await fetch(`${API}/capital`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date:g('c_date')||today(),type:g('c_typ'),amount:+g('c_amt'),notes:g('c_not')})}); closeModal('cm'); load(); } // ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ function g(id){ return document.getElementById(id).value; } function today(){ return new Date().toISOString().slice(0,10); } function fmt(v){ return (v>=0?'+':'')+v.toFixed(0)+' USDT'; } function tab(name, btn) { document.querySelectorAll('main>div[id^=tab-]').forEach(el=>el.classList.add('hidden')); document.getElementById(`tab-${name}`).classList.remove('hidden'); document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on')); btn.classList.add('on'); } function openModal(id){ const m=document.getElementById(id); m.classList.remove('hidden'); const d=m.querySelector('input[type=date]'); if(d)d.value=today(); } function closeModal(id){ document.getElementById(id).classList.add('hidden'); } document.querySelectorAll('.overlay').forEach(el=>el.addEventListener('click',e=>{ if(e.target===el)el.classList.add('hidden'); })); load(); setInterval(load, 30000); </script> 
    <script>
    // INJECTED DATA FROM PYTHON (MOCK FOR VISUALIZATION)
    const REAL_DATA = { btc: { price: 103420.50, change_24h: 2.37 }, trades: [ {id:1, date:'2025-01-03', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:94200, tp:102000, sl:90000, leverage:15, result_pct:8.32, result_usdt:1248, setup:'EMA 21/55 Cross'}, {id:2, date:'2025-01-07', direction_type:'Neutral', intensity:'Ultra Defensiva', direction:'LONG', entry:96500, tp:103000, sl:92000, leverage:5, result_pct:3.10, result_usdt:310, setup:'Grid Range 3%'}, {id:3, date:'2025-01-11', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:97800, tp:107500, sl:93000, leverage:20, result_pct:12.40, result_usdt:2480, setup:'ATH Breakout'}, {id:4, date:'2025-01-14', direction_type:'Tend√™ncia de Baixa', intensity:'Moderada', direction:'SHORT', entry:101200, tp:93000, sl:105000, leverage:12, result_pct:-4.80, result_usdt:-720, setup:'Death Cross'}, {id:5, date:'2025-01-18', direction_type:'Neutral', intensity:'Equilibrada', direction:'LONG', entry:98400, tp:101500, sl:96000, leverage:8, result_pct:1.90, result_usdt:228, setup:'Range 98-101k'}, {id:6, date:'2025-01-22', direction_type:'Tend√™ncia de Alta', intensity:'Equilibrada', direction:'LONG', entry:99100, tp:108000, sl:94500, leverage:12, result_pct:9.50, result_usdt:1140, setup:'Bull Flag'}, {id:7, date:'2025-01-25', direction_type:'Neutral', intensity:'Ultra Defensiva', direction:'LONG', entry:100300, tp:106000, sl:96000, leverage:5, result_pct:2.70, result_usdt:270, setup:'Grid Range 5%'}, {id:8, date:'2025-01-29', direction_type:'Tend√™ncia de Alta', intensity:'Agressiva', direction:'LONG', entry:101800, tp:112000, sl:97000, leverage:18, result_pct:-3.20, result_usdt:-576, setup:'Resist√™ncia 102k'}, {id:9, date:'2025-02-01', direction_type:'Tend√™ncia de Alta', intensity:'Moderada', direction:'LONG', entry:102500, tp:112000, sl:98000, leverage:10, result_pct:6.80, result_usdt:680, setup:'RSI Oversold + EMA'}, {id:10, date:'2025-02-05', direction_type:'Tend√™ncia de Baixa', intensity:'Equilibrada', direction:'SHORT', entry:103800, tp:99000, sl:106000, leverage:10, result_pct:-2.10, result_usdt:-210, setup:'Range Breakdown'}, {id:11, date:'2025-02-08', direction_type:'Neutral', intensity:'Moderada', direction:'LONG', entry:101200, tp:106000, sl:97500, leverage:8, result_pct:4.20, result_usdt:420, setup:'Ranging Market'}, {id:12, date:'2025-02-11', direction_type:'Tend√™ncia de Alta', intensity:'Equilibrada', direction:'LONG', entry:102100, tp:110500, sl:97800, leverage:12, result_pct:7.10, result_usdt:852, setup:'EMA Retest Bull'}, ], capital: [ {id:1, date:'2025-01-01', type:'aporte', amount:5000, notes:'Capital inicial'}, {id:2, date:'2025-01-15', type:'aporte', amount:2000, notes:'Refor√ßo'}, {id:3, date:'2025-02-01', type:'retirada', amount:1500, notes:'Retirada parcial'}, ], metrics: { total_pnl:6122, win_rate:75.0, total_trades:12, max_dd:8.4, sharpe:1.87 } };
    
    // Override load function to use static data
    async function load() {
        console.log("Loading static data...");
        S.btc = REAL_DATA.btc;
        S.trades = REAL_DATA.trades;
        S.capital = REAL_DATA.capital;
        S.metrics = REAL_DATA.metrics;
        
        renderHeader(); 
        renderOv(); 
        renderTr(); 
        renderCa();
    }
    
    // Force reload immediately
    load();
    </script>
    </body>
     </html><!-- update2 -->
<!-- update2 -->
